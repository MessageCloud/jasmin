version: '2'
services:
  messagecloud_jasmin:
     image: messagecloud/jasmin:latest
     network_mode: host
     restart: always
     ports:
         - "2775:2775"
         - "${JASMIN_PORT}:${JASMIN_PORT}"
         - "1401:1401"
         - "6379:6379"
         - "15672:15672"
         - "8000:8000"
         - "8001:8001"
     volumes:
         - jasmin-store:/etc/jasmin/store
         - jasmin-logs:/var/log/jasmin
         - redis-data:/var/lib/redis
         - redis-logs:/var/log/redis
         - rabbitmq-logs:/var/log/rabbitmq
         - rabbitmq-data:/var/lib/rabbitmq
     build:
         context: .
         dockerfile: Dockerfile
         args:
           JASMIN_VERSION: "${JASMIN_VERSION}"
           JASMIN_USERNAME: "${JASMIN_USERNAME}"
           JASMIN_PASSWORD: "${JASMIN_PASSWORD}"
           JASMIN_PASSWORD_MD5: "${JASMIN_PASSWORD_MD5}"
           JASMIN_PORT: "${JASMIN_PORT}"
           RABBITMQ_USERNAME: "${RABBITMQ_USERNAME}"
           RABBITMQ_PASSWORD: "${RABBITMQ_PASSWORD}"
           JASMIN_API_USERNAME: "${JASMIN_API_USERNAME}"
           JASMIN_API_PASSWORD: "${JASMIN_API_PASSWORD}"
           JASMIN_WEBUI_USERNAME: "${JASMIN_WEBUI_USERNAME}"
           JASMIN_WEBUI_PASSWORD: "${JASMIN_WEBUI_PASSWORD}"
     environment:
         JASMIN_HOST: "${JASMIN_HOST}"
         JASMIN_PORT: "${JASMIN_PORT}"
         JASMIN_USERNAME: "${JASMIN_USERNAME}"
         JASMIN_PASSWORD: "${JASMIN_PASSWORD}"
         RABBITMQ_USERNAME: "${RABBITMQ_USERNAME}"
         RABBITMQ_PASSWORD: "${RABBITMQ_PASSWORD}"
volumes:
  jasmin-store:
  jasmin-logs:
  redis-data:
  redis-logs:
  rabbitmq-logs:
  rabbitmq-data:
